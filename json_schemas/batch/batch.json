{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "properties": {
    "_id": {
      "type": "object",
      "format": "hidden",
      "properties": {
        "$oid": {
          "type": "string",
          "pattern": "^[a-fA-F0-9]{24}$"
        }
      },
      "required": ["$oid"]
    },
    "name": {
      "type": "string"
    },
    "description": {
      "type": "string"
    },
    "vendorName": {
      "type": "string"
    },
    "vendorCode": {
      "type": "string"
    },
    "unspscCode": {
      "type": "string"
    },
    "eClass": {
      "type": "string"
    },
    "shippedIn": {
      "type": "string"
    },
    "storageTemp": {
      "type": "string"
    },
    "deliveryDate": {
      "type": "string",
      "format": "date"
    },
    "expirationDate": {
      "type": "string",
      "format": "date"
    },
    "content": {
      "anyOf": [
        {
          "$ref": "#/$defs/cellLine"
        },
        {
          "$ref": "#/$defs/compound"
        }
      ],
      "title": "Batch Type",
      "type": "object"
    },
    "createdAt": {
      "type": "object",
      "properties": {
        "$date": {
          "type": "string",
          "format": "date-time"
        }
      },
      "required": ["$date"]
    },
    "createdBy": {
      "type": "object",
      "format": "hidden",
      "properties": {
        "$oid": {
          "type": "string",
          "pattern": "^[a-fA-F0-9]{24}$"
        }
      },
      "required": ["$oid"]
    },
    "updatedAt": {
      "type": "object",
      "properties": {
        "$date": {
          "type": "string",
          "format": "date-time"
        }
      },
      "required": ["$date"]
    },
    "scope": {
      "type": "string",
      "enum": ["private", "shared", "public"],
      "default": "public"
    },
    "ownerUserId": {
      "type": "object",
      "properties": {
        "$oid": {
          "type": "string",
          "pattern": "^[a-fA-F0-9]{24}$"
        }
      },
      "required": ["$oid"],
      "options": {
        "hidden": true
      }
    },
    "updatedBy": {
      "type": "object",
      "format": "hidden",
      "properties": {
        "$oid": {
          "type": "string",
          "pattern": "^[a-fA-F0-9]{24}$"
        }
      },
      "required": ["$oid"]
    }
  },
  "required": ["name", "description", "vendorName", "vendorCode", "type", "deliveryDate", "expirationDate", "scope"],
  "$defs": {
    "cellLine": {
      "type": "object",
      "properties": {
        "type": {
          "const": "Cell Line",
          "default": "Cell Line",
          "format": "hidden",
          "type": "string"
        },
        "cellLineId": {
          "type": "object",
          "format": "hidden",
          "properties": {
            "$oid": {
              "type": "string",
              "pattern": "^[a-fA-F0-9]{24}$"
            }
          }
        },
        "cellLineName": {
          "type": "string"
        },
        "synonyms": {
          "type": "string"
        },
        "organism": {
          "type": "string"
        },
        "diseases": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "biologicalSource": {
          "type": "string"
        }
      },
      "required": ["cellLineName", "synonyms", "organism", "diseases", "biologicalSource"]
    },
    "compound": {
      "type": "object",
      "properties": {
        "type": {
          "const": "Compound",
          "default": "Compound",
          "format": "hidden",
          "type": "string"
        },
        "compoundId": {
          "type": "object",
          "options": {
            "hidden": true
          },
          "properties": {
            "$oid": {
              "type": "string",
              "pattern": "^[a-fA-F0-9]{24}$"
            }
          }
        },
        "compoundName": {
          "type": "string"
        },
        "Salt": {
          "type": "string"
        },
        "molecularFormula": {
          "type": "string"
        },
        "molecularWeight": {
          "type": "number"
        },
        "purity": {
          "type": "string"
        },
        "smiles": {
          "type": "string"
        },
        "inchi": {
          "type": "string"
        }
      },
      "required": ["compoundId", "compoundName", "Salt", "molecularFormula", "molecularWeight", "purity", "smiles", "inchi"]
    }
  }
}