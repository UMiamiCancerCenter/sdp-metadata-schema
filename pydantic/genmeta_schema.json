{
  "$defs": {
    "cellLine": {
      "properties": {
        "role": {
          "const": "Model System",
          "default": "Model System",
          "format": "hidden",
          "title": "Role",
          "type": "string"
        },
        "entity": {
          "const": "Cell Line",
          "default": "Cell Line",
          "format": "hidden",
          "title": "Entity",
          "type": "string"
        },
        "cellLineName": {
          "title": "Name",
          "type": "string",
          "ui": {
            "preview": {
              "visible": true
            }
          }
        },
        "cellLineLabBatchLabel": {
          "default": "",
          "title": "Lab Batch Label",
          "type": "string",
          "ui": {
            "preview": {
              "visible": true
            }
          }
        },
        "cellLineTissue": {
          "title": "Tissue of Origin",
          "type": "string",
          "ui": {
            "preview": {
              "visible": true
            }
          }
        },
        "cellLineOrgan": {
          "title": "Organ of Origin",
          "type": "string",
          "ui": {
            "preview": {
              "visible": true
            }
          }
        },
        "cellLineOrganism": {
          "title": "Organism of Origin",
          "type": "string",
          "ui": {
            "preview": {
              "visible": true
            }
          }
        },
        "cellLineDisease": {
          "title": "Disease",
          "type": "string",
          "ui": {
            "preview": {
              "visible": true
            }
          }
        }
      },
      "required": [
        "cellLineName",
        "cellLineTissue",
        "cellLineOrgan",
        "cellLineOrganism",
        "cellLineDisease"
      ],
      "title": "Cell Line",
      "type": "object",
      "ui": {
        "preview": {
          "visible": true
        }
      }
    },
    "crispr": {
      "properties": {
        "entity": {
          "const": "CRISPR knockout",
          "default": "CRISPR knockout",
          "format": "hidden",
          "title": "Entity",
          "type": "string"
        },
        "crisprName": {
          "title": "Name",
          "type": "string"
        },
        "crisprLabBatchLabel": {
          "default": "",
          "title": "Lab Batch Label",
          "type": "string"
        },
        "crisprTargetGeneID": {
          "title": "NCBI Entrez ID for Target Gene",
          "type": "string"
        },
        "crisprTargetGeneSpecies": {
          "title": "Target Gene Species",
          "type": "string"
        }
      },
      "required": [
        "crisprName",
        "crisprTargetGeneID",
        "crisprTargetGeneSpecies"
      ],
      "title": "CRISPR knockout",
      "type": "object"
    },
    "smallMolecule": {
      "properties": {
        "entity": {
          "const": "Small Molecule",
          "default": "Small Molecule",
          "format": "hidden",
          "title": "Entity",
          "type": "string"
        },
        "smallMoleculeName": {
          "title": "Name",
          "type": "string"
        },
        "smallMoleculeLabBatchLabel": {
          "default": "",
          "title": "Lab Batch Label",
          "type": "string"
        },
        "smallMoleculeDuration": {
          "title": "Duration",
          "type": "string"
        },
        "smallMoleculeConcentration": {
          "title": "Concentration",
          "type": "string"
        }
      },
      "required": [
        "smallMoleculeName",
        "smallMoleculeDuration",
        "smallMoleculeConcentration"
      ],
      "title": "Small Molecule",
      "type": "object"
    },
    "tissue": {
      "properties": {
        "role": {
          "const": "Model System",
          "default": "Model System",
          "format": "hidden",
          "title": "Role",
          "type": "string"
        },
        "entity": {
          "const": "Tissue",
          "default": "Tissue",
          "format": "hidden",
          "title": "Entity",
          "type": "string"
        },
        "tissueType": {
          "title": "Tissue Type",
          "type": "string",
          "ui": {
            "preview": {
              "visible": true
            }
          }
        },
        "tissueLabBatchLabel": {
          "default": "",
          "title": "Lab Batch Label",
          "type": "string",
          "ui": {
            "preview": {
              "visible": true
            }
          }
        },
        "tissueOrganism": {
          "title": "Organism of Origin",
          "type": "string",
          "ui": {
            "preview": {
              "visible": true
            }
          }
        }
      },
      "required": [
        "tissueType",
        "tissueOrganism"
      ],
      "title": "Tissue",
      "type": "object",
      "ui": {
        "preview": {
          "visible": true
        }
      }
    }
  },
  "properties": {
    "name": {
      "title": "Sample Name",
      "type": "string"
    },
    "description": {
      "title": "Description",
      "type": "string"
    },
    "experimentalSystem": {
      "anyOf": [
        {
          "$ref": "#/$defs/cellLine"
        },
        {
          "$ref": "#/$defs/tissue"
        }
      ],
      "title": "Experimental System",
      "type": "object",
      "ui": {
        "preview": {
          "visible": true
        }
      }
    },
    "perturbation": {
      "items": {
        "anyOf": [
          {
            "$ref": "#/$defs/smallMolecule"
          },
          {
            "$ref": "#/$defs/crispr"
          }
        ]
      },
      "title": "Perturbation",
      "type": "array",
      "ui": {
        "datagrid": {
          "columns": [
            {
              "field": "entity",
              "title": "Perturbagen Type"
            },
            {
              "field": "name",
              "title": "Name"
            },
            {
              "field": "duration",
              "title": "Duration"
            },
            {
              "field": "concentration",
              "title": "Concentration"
            }
          ],
          "entries": {
            "Antibody": {
              "columns": [
                {
                  "field": "entity",
                  "getCellValue": "entity"
                },
                {
                  "field": "name",
                  "getCellValue": "antibodyName"
                },
                {
                  "field": "duration",
                  "getCellValue": "antibodyDuration"
                },
                {
                  "field": "concentration",
                  "getCellValue": "antibodyConcentration"
                }
              ]
            },
            "CRISPR": {
              "columns": [
                {
                  "field": "entity",
                  "getCellValue": "entity"
                },
                {
                  "field": "name",
                  "getCellValue": "crisprName"
                }
              ]
            },
            "Infectious Agent": {
              "columns": [
                {
                  "field": "entity",
                  "getCellValue": "entity"
                },
                {
                  "field": "name",
                  "getCellValue": "infectiousAgentName"
                },
                {
                  "field": "duration",
                  "getCellValue": "infectiousAgentDuration"
                },
                {
                  "field": "concentration",
                  "getCellValue": "infectiousAgentConcentration"
                }
              ]
            },
            "Protein": {
              "columns": [
                {
                  "field": "entity",
                  "getCellValue": "entity"
                },
                {
                  "field": "name",
                  "getCellValue": "proteinPName"
                },
                {
                  "field": "duration",
                  "getCellValue": "proteinPDuration"
                },
                {
                  "field": "concentration",
                  "getCellValue": "proteinPConcentration"
                }
              ]
            },
            "RNAi": {
              "columns": [
                {
                  "field": "entity",
                  "getCellValue": "entity"
                },
                {
                  "field": "name",
                  "getCellValue": "rnaiName"
                },
                {
                  "field": "duration",
                  "getCellValue": "rnaiDuration"
                },
                {
                  "field": "concentration",
                  "getCellValue": "rnaiConcentration"
                }
              ]
            },
            "Small Molecule": {
              "columns": [
                {
                  "field": "entity",
                  "getCellValue": "entity"
                },
                {
                  "field": "name",
                  "getCellValue": "smallMoleculeName"
                },
                {
                  "field": "duration",
                  "getCellValue": "smallMoleculeDuration"
                },
                {
                  "field": "concentration",
                  "getCellValue": "smallMoleculeConcentration"
                }
              ]
            }
          }
        },
        "preview": {
          "title": "Perturbation:",
          "visible": true
        }
      }
    }
  },
  "required": [
    "name",
    "description",
    "experimentalSystem",
    "perturbation"
  ],
  "title": "Sample",
  "type": "object",
  "ui": {
    "datagrid": {
      "columns": [
        {
          "field": "sampleName",
          "getCellValue": "name",
          "title": "Sample Name"
        },
        {
          "field": "description",
          "getCellValue": "description",
          "title": "Description"
        },
        {
          "field": "experimentalSystemColumn",
          "getCellValue": "experimentalSystem.entity",
          "title": "Experimental System"
        }
      ]
    },
    "preview": {
      "visible": true
    }
  }
}
